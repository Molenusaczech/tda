{* This is the welcome page, you can delete it *}

{block title}

Hlavn√≠ str√°nka

{/block}

{block content}

<div id="header">
	<span id="title">&lt;<span>DIARY</span>/&gt;</span>
	{if $admin}
	<a n:href="AccountManager:Default" id="admin"></a>
	{/if}
	<a n:href="Login:Logout" id="logout"></a>
</div>
<div id="wrapper">
	<div id="side-container">

	<div id="tag-container">
	<h2>Tags</h2>

	{foreach $tags as $tid => $tag}

	<span style={$tag['style']} class="tagSelector" data-tagselect={$tid}> 
		<input type="checkbox" onClick=tagClick({$tid})> 
		<span data-tagtitle={$tid}> {$tag["name"]} </span> 
		
		<span class="popup">
			<span onClick=tagPopup({$tid})>‚úé</span>
			<span class="tagPopup" data-popup={$tid}>
				<input type="color" value="{$tag['color']}">
				<input type="text" placeholder="Jm√©no ≈°t√≠tku" value="{$tag['name']}">		
				<input type="button" value="Upravit" onclick=tagEdit({$tid})>
			</span>
			</span>
			<span onClick=tagDelete({$tid}) class="clickable">üóë</span>
	</span>

	{/foreach}

 <span class="popup" id="newTag">
 		<span onclick=tagPopup("new")></span>
        <span class="tagPopup" id="newPopup">
			<input type="color" id="newColor" value="#000000">
			<input type="text" id="newName" placeholder="Jm√©no ≈°t√≠tku">		
			<input type="button" value="Vytvo≈ôit" onclick=tagCreate("new")>
        </span>
</span>

	</div>

<div id="filter-container">

<h2>Filtr</h2>
<div id="filters">
Datum:
<input type="datetime-local" id="dateFrom" value="{$filters["mintime"]}" onchange="filter()">
- 
<input type="datetime-local" id="dateTo" value="{$filters["maxtime"]}" onchange="filter()">

<br>

Jazyk:
<select id="lang" onchange="filter()">

<option value="all">V≈°e</option>

{foreach $filters["langlist"] as $lang}

<option value="{$lang}">{$lang}</option>

{/foreach}

</select>

<br>

D√©lka:
Od: <input type="number" id="lenghtFrom" value="{$filters["minlenght"]}" onchange="filter()">
Do: <input type="number" id="lenghtTo" value="{$filters["maxlenght"]}" onchange="filter()">

<br>

Hodnocen√≠:
Od: <input type="number" id="ratingFrom" value="{$filters["minrating"]}" onchange="filter()">
Do: <input type="number" id="ratingTo" value="{$filters["maxrating"]}" onchange="filter()">

</div>
</div>
</div>
<div id="main-container">

	<div id="table-wrapper">
	<table id="mainTable">
	<tr id="tableTitle">

<th>Popis<span id="desc-sort"></span></th>
<th class="sort" onclick=sort("date")>Datum<span id="date-sort"></span></th>
<th class="sort" onclick=sort("lang")>Jazyk<span id="lang-sort"></span></th>
<th class="sort" onclick=sort("lenght")>D√©lka<span id="lenght-sort"></span></th>
<th class="sort" onclick=sort("rating")>Hodnocen√≠<span id="rate-sort"></span></th>
<th>≈†t√≠tky</th>

	</tr>
	{foreach $notes as $id => $t}

	<tr {$t["data"]} data-id={$id}> 

	<td>{$t["description"]}</td>
	<td>{$t["date"]}</td>
	<td>{$t["lang"]}</td>
	<td>{$t["lenght"]} min</td>
	<td>{$t["rating"]}<span class="star"><span></td>

	<td> 

	{foreach $t["tags"] as $tag}

	<span style={$tag['color']} data-tagid={$tag["id"]}>{$tag['name']}</span>

	{/foreach}

	</td>
	<td> <input type="button" name="editButton" value="Upravit" onClick=edit({$id})> </td>
	<td> <input type="button" value="Smazat" onClick=del({$id})> </td>


	</tr>

	{/foreach}
	</table>

	<input id="addButton" type="button" value="" onClick=add()>
	</div>
	</div>
</div>
<script> 
var tags = {$tags};
var filterdata = {$filters};
</script>

<script src="{$basePath}/js/records.js"></script>